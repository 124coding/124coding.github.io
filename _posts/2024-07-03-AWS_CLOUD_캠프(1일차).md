---
layout: single
title:  "AWS_CLOUD_캠프"
categories: study
---

# 1. AWS(Amazon Web Services) 소개
### 이 포스팅에서는 캠프에서 배운 이론을 포스팅하는 것으로 커피숍에 AWS를 비유하여 작성하겠습니다.
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/a15f3c71-f5ab-4afa-94e7-b0e2104f35f3" width="500" height="300">    

거의 모든 최신 컴퓨팅의 중심에는 커피숍 거래와 유사한 트랜잭션을 사용하는 기본적 클라이언트-서버 모델이 있습니다.   
고객이 커피 한잔 요청 -> 바리스타가 음료를 만들어 고객에게 제공   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/ff6fe39e-35af-4499-9c3f-4ce82005d26f" width="500" height="300">    

컴퓨팅에서 **고객**은 클라이언트이며 클라이언트는 사람이 컴퓨터 서버에 요청을 하기 위해 상호 작용하는 웹, 데스크톱 애플리케이션일 수 있습니다. 서버는 **바리스타**와 같습니다. 서버는 일종의 가상 서버인 Amazon Elastic Compute Cloud(Amazon EC2)와 같은 서비스일 수 있습니다.   
ex) 고객이 커피 주문, 쿠폰, 프로모션 등을 요청한다고 가정하면 서버는 요청을 평가하고 클라이언트에 정보를 반환하여 요청을 이행합니다.   

## 클라우드 컴퓨팅
클라이언트-서버 모델을 통해 **클라우드 컴퓨팅**이 가능합니다. 클라우드 컴퓨팅이란 인터넷을 통해 IT 리소스와 애플리케이션을 *온디맨드*로 제공하는 서비스를 말합니다.   
이때 온디맨드란 사용자의 요구가 있었을 때 그 요구에 따라 서비스를 제공하는 것을 말합니다.   

클라우드 컴퓨팅을 사용하면 대규모 사전 투자를 방지하고 하드웨어 관리에 시간과 리소스를 할애하지 않아도 되며 필요에 따라 컴퓨팅 리소스 프로비저닝이 가능하며 사용한만큼의 비용만 지불해도 됩니다.   

### 클라우드 컴퓨팅 배포 모델
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/b84653f0-118b-4660-aa3a-a929ad207376" width="500" height="300">   
   
클라우드 배포 전략을 선택 시 기업은 원하는 클라우드 애플리케이션 구성 요소, 선호하는 리소스 관리 도구, 레거시 IT 인프라 요구 사항 등의 요소를 고려해야 합니다.   
이때 배포의 세가지 모델은 클라우드 기반 배포, 온프레미스 배포, 하이브리드 배포가 있습니다.   

#### 클라우드 기반 배포
1. 애플리케이션의 모든 부분을 클라우드에서 실행
2. 기존 애플리케이션을 클라우드로 마이그레이션
3. 클라우드에서 새로운 애플리케이션 설계 및 구축

ex) 기업은 완전히 클라우드에 기반한 가상 서버, 데이터베이스, 네트워킹 구성 요소로 구성된 애플리케이션을 생성할 수 있습니다. 이를 통해 회사의 관리, 설계, 크기 조정 요구 사항을 줄일 수 있습니다.   

#### 온프레미스 배포
1. 가상화 및 리소스 관리 도구를 사용하여 리소스 배포
2. 애플리케이션 관리 및 가상화 기술을 사용하여 리소스 사용량 증가

온프레미스 배포는 프라이빗 클라우드 배포라고도 불립니다.   
ex) 온프레미스 데이터 센터에서 실행되는 애플리케이션이 있을 수 있는데 이 모델은 레거시 IT 인프라와 비슷하지만 애플리케이션 관리와 가상화 기술이 통합되어 리소스 사용량을 높이는 데 도움이 됩니다.   

#### 하이브리드 배포
1. 클라우드 기반 리소스를 온프레미스 인프라에 연결
2. 클라우드 기반 리소스와 레거스 IT 애플리케이션을 통합

1번과 같은 접근 방법이 필요한 여러 상황이 있을 수 있는데
ex) 온프레미스에서 보다 잘 유지 관리되는 레거시 애플리케이션이 있거나 정부 규정에 따라 특정 레코드를 온프레미스에 보관해야 하는 경우가 있을 수 있습니다.   
ex) 배치 데이터 처리 및 분석을 자동화할 수 있는 클라우드 서비스를 사용하려는 회사가 있다고 가정해보겠습니다. 이때 이 회사는 온프레미스에 더 적합하고 클라우드로 마이그레이션되지 않는 여러 레거시 애플리케이션이 있습니다. 이럴때 하이브리드 배포를 통해 레거시 애플리케이션을 온프레미스로 유지하고 클라우드에서 실행되는 데이터 및 분석 서비스의 이점을 활용할 수 있습니다.   

### 클라우드 컴퓨팅의 이점
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/4bde761e-d4ab-408e-8b58-109b09ea6c4f" width="500" height="300">   

초기 비용을 가변 비용으로 바꿀 수 있다는 이점이 있습니다.   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/d3ee7d6a-cc25-4919-88e2-f255d7877e8d" width="500" height="300">   
데이터 센터에서 컴퓨팅하려면 인프라 및 서버 관리에 더 많은 비용과 시간을 소비해야 하는 경우가 많은데 이러한 작업에 신경을 덜 쓰고 애플리케이션과 고객에 더 집중할 수 있습니다.   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/06d2daf3-4f61-43e8-a1f7-2faea8738ca3" width="500" height="300">   
용량을 추정할 필요가 없습니다.   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/13dd1d1a-437f-4905-b532-55b506240cc6" width="500" height="300">   
거대한 규모의 경제를 활용할 수 있습니다. 인프라를 소유할 때보다 가변 비용이 낮아집니다.
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/6f877511-6445-48ae-9ebd-573efc24b43b" width="500" height="300">   
속도와 민첩성을 높일 수 있습니다. 데이터 센터에서 컴퓨팅 수행 시, 필요한 새 리소스를 확보하는 데 몇 주가 걸릴 수도 있는데 이에 비해 클라우드 컴퓨팅 이용시 몇 분 만에 새로운 리소스에 액세스할 수 있습니다.   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/c9a3dcec-f9ec-4e8c-9920-4001a2600ceb" width="500" height="300">   
AWS 클라우드의 글로벌 입지를 활용하여 신속하게 애플리케이션을 배포하는 동시에 짧은 지연 시간을 제공할 수 있습니다.   

### AWS 핵심 서비스 범주
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/84a08969-b2b3-4c0e-ae28-231f2abe00fc" width="500" height="300">   

AWS에서 제공하는 모든 서비스를 알 필요는 없기에 기본 개념을 중점적으로 설명하겠습니다.   

## 클라우드 컴퓨팅
AWS에서는 Amazon EC2(Amazon Elastic Compute Cloud) 서비스를 사용하여 가상 서버를 실행할 수 있습니다.   

### Amazon EC2
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/4d1d3cf5-2685-4a3a-b679-7d6c6815e10f" width="500" height="300">   

Amazon EC2는 클라우드에서 안전하고 크기 조정이 가능한 컴퓨팅 용량을 Amazon EC2 인스턴스로 제공합니다.   

ex) Amazon EC2 인스턴스에서 가상 서버를 사용하여 AWS 클라우드에서 애플리케이션을 실행하면 다음과 같은 과정이 됩니다.   
1. 몇 분 내에 Amazon EC2 인스턴스 프로비저닝 및 시작   
2. 워크로드 실행을 맟치면 사용 중지   
3. 인스턴스가 실행중일 때 사용한 컴퓨팅 시간에 대해서만 비용 지불, 인스턴스가 중지 or 종료 시 비용 지불 x   
4. 필요한 서버 용량에 대해서만 비용을 지불하여 비용 절감   

### Amazon EC2 작동 방식
인스턴스를 시작 -> 인스턴스 연결 -> 인스턴스 사용   
1. 인스턴스 시작에서는 인스턴스의 기본 구성이 포함된 템플릿을 선택하고 이러한 구성에는 운영체제, 애플리케이션 서버 또는 애플리케이션이 포함됩니다. 인스턴스의 특정 하드웨어 구성인 인스턴스 유형도 선택합니다.
2. 인스턴스 연결 시에는 여러 가지 방법으로 연결할 수 있습니다. 프로그램과 애플리케이션에는 인스턴스에 직접 연결하고 데이터를 교환하는 여러 가지 방법이 있습니다. 또는 사용자가 로그인하여 인스턴스에 연결하고 컴퓨터 데스크톱에 액세스할 수도 있습니다.
3. 인스턴스 사용은 명령을 실행하여 소프트웨어 설치, 스토리지 추가, 파일 복사 및 정리 등의 작업을 수행할 수 있습니다.

### Amazon EC2 인스턴스 유형
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/189a0d5a-e92e-41e5-8bf4-b532fb03689c" width="500" height="300">   

만약 커피숍의 커피 만들기, 계산대 업무, 물품 주문 등의 일을 각각의 직원들이 전부 하게 되면 동선이든 일이든 겹치는 등의 부분이 발생하여 고객에게 최상의 서비스를 제공하지 못하게 될 수 있겠죠.   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/85257c35-09ba-48e9-96e1-6e69a4221e42" width="500" height="300">   

이렇기에 각 직원마다의 업무 전문화가 필요하게 됩니다.   
각 직원마다 강점이 다르기에 각 직원의 전문성을 발휘할 수 있게 일하게 하는게 효율이 가장 높게 될 것입니다. 그럼 이러한 직원들을 다양한 유형의 Amazon EC2 인스턴스로 생각하게 되먄 Amazon EC2 인스턴스를 시작하여 다양한 작업을 완료할 수 있게 됩니다.   

Amazon EC2 인스턴스 유형에는 5가지가 존재하는데   
인스턴스 유형을 선택할 때는 워크로드 및 애플리케이션의 구체적 요구 사항을 고려해야 합니다.   

1. 범용 - 컴퓨팅, 메모리, 네트워킹 리소스를 균형있게 제공, 다양한 워크로드에 적합
2. 컴퓨팅 최적화 - 고성능 프로세서 제공, 컴퓨팅 집약적 애플리케이션 및 배치 처리 워크로드에 적합
3. 메모리 최적화 - 메모리 집약적 워크로드를 위한 빠른 성능 제공, 고성능 데이터베이스에 적합
4. 가속 컴퓨팅 - 하드웨어 액셀러레이터를 사용하여 데이터 처리 가속화, 애플리케이션 스트리밍 및 그래픽 워크로드에 적합
5. 스토리지 최적화 - 낮은 지연 시간 및 높은 초당 입출력 작업 수 (IOPS) 제공, 분산 파일 시스템 및 데이터 웨어하우징 애플리케이션과 같은 워크로드에 적합

### Amazon EC2 인스턴스 요금 옵션
Amazon EC2에서는 사용한 컴퓨팅 시간에 대해서만 비용을 지불합니다. Amazon EC2는 사용 사례에 따라 6개의 요금 옵션을 제공합니다.   

1. 온디맨드 - 초기 선결제 비용이나 최소 약정 없음, 불규칙한 단기 워크로드에 적합
2. 스팟 - 시작 및 종료 시간이 자유로운 워크로드에 적합, 온디맨드 대비 비용 절감
3. 예약 - 온디맨드 요금에 비해 결제 할인 제공, 1년 또는 3년 약정 필요
4. Compute Savings Plans - 컴퓨팅 사용량이 일정할 경우 온디맨드에 비해 최대 66% 비용 절감, 1년 또는 3년 약정 필요
5. 전용 인스턴스 - 단일 고객용 하드웨어의 VPC에서 실행되는 EC2 인스턴스, 표준 Amazon EC2 인스턴스에 비해 더 높은 비용
6. 전용 호스트 - 단일 고객용 EC2 인스턴스 용량을 갖춘 물리적 서버, 가장 비용이 많이 드는 Amazon EC2 옵션

### Amazon EC2 Auto Scaling
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/1b484fb0-5a18-470d-962b-39adf65230c5" width="500" height="300">   

수동 크기 조정의 예를 위의 커피숍 예로 설명하면 바쁜 시기에 바리스타가 한 명이면 이 바리스타는 업무가 벅차서 지원을 요청할 것이고 이 요청을 들은 점장은 다른 바리스타를 데려올 것입니다. 이러한 것이 수동 크기 조정의 예입니다.   
이것은 비효율적일 수 있기에 확장성을 위해서는 필요한 리소스만으로 시작하고 수요 변화에 따라 자동으로 확장 및 축소되도록 아키텍처를 설계해야 합니다. 이렇기에 사용한 리소스에 대해서만 비용을 지불하고 고객의 요구를 충족할 수 있는 컴퓨팅 용량 부족을 걱정할 필요가 없습니다.   
그럼 크기 조정이 자동으로 되려면 어떻게 해야 할까요? Amazon EC2 인스턴스에 이 기능을 제공하는 AWS 서비스가 Amazon EC2 Auto Scaling 입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/ff7046d3-a16f-4f52-b993-c22c7a6dcd85" width="500" height="300">   

Amazon EC2 Auto Scaling에서는 동적 크기 조정과 예측 크기 조정이라는 두 가지 접근 방식을 사용할 수 있는데 동적 크기 조정은 수요 변화에 대응하고 예측 크기 조정은 예측된 수요에 따라 적절한 수의 Amazon EC2 인스턴스를 자동으로 예약합니다. 이 둘을 함께 사용하면 더 빠르게 조정이 가능합니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/80221e5d-974b-47dc-86b1-4e3c3623f639" width="500" height="300">   

위는 최대 4개의 Amazon EC2 인스턴스로 구성되는 Auto Scaling 그룹을 보여주는 다이어그램으로 최소 1개, 희망 2개, 마지막 2개는 필요에 따라 확장이 가능합니다.   
Amazong Auto Scaling을 애플리케이션에 추가하면 필요 시 새 인스턴스를 애플리케이션에 추가 혹은 제거할 수 있습니다.   

### 로드 밸런싱
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/ec69bfe5-c2ef-47bb-aa66-e99faf369cf1" width="500" height="300">   

앞의 커피숍 예에서 바리스타 한 명이 대부분의 일을 다 한다고 가정하겠습니다.   
이러면 효율성이 떨어지게 되므로 한 바리스타에세 일이 집중되는 일이 없도록 워크로드를 분산해 줄 필요가 있습니다.   
AWS에서 Elastic Load Balancing을 사용하면 워크로드의 크기는 동일하게 유지되지만 워크로드가 Amazon EC2 인스턴스 전체에 균등하게 분산되어 균형이 유지되게 할 수 있습니다.   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/e8947a92-0c71-44ac-98d9-cdf0cccd9ce1" width="500" height="300">   

### AWS 메시징 서비스
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/d45927fa-f96e-4010-b641-5724f5d5b550" width="500" height="300">   

Amazon Simple Notification Service(Amazon SNS)는 게시/구독 서비스로 게시자는 Amazon SNS 주제를 사용하여 구독자에게 메시지를 게시합니다. 이는 커피숍에서 계산원이 음료를 만드는 바리스타에게 커피 주문을 전달하는 것과 비슷합니다. Amazon SNS에서 구독자는 웹 서버, 이메일 주소, AWS Lambda 함수 또는 그 밖의 여러 옵션이 될 수 있습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/02355395-5bb9-4626-8973-64aadc3e9bac" width="500" height="300">   

위 사진을 보면 위의 주제 등과 같은 커피숍의 전체 비지니스 영역의 업데이트가 포함된 단일 뉴스레터가 있다고 가정하겠습니다. 뉴스레터는 하나이므로 위의 모든 주제가 단일 주제로 그룹화되게 되어 뉴스레터를 구독하는 고객은 모든 업데이트를 받게 됩니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/80dfee89-9490-4c16-a752-f0910b430ea7" width="500" height="300">   

이때 각 주제를 따로 받고 싶다는 요청을 듣고 뉴스레터를 개별 주제로 바꾼다면 위의 사진처럼 각 고객은 자신이 원하는 주제들에 대해서만 구독할 수 있게 됩니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/c629677e-3bbe-4cb4-8d73-b673a07ff8f5" width="500" height="300">   

Amazon Simple Queue Service(Amazon SQS)는 메시지 대기열 서비스입니다.   
이를 이용하면 메시지 손실이나 다른 서비스 사용 없이 아무리 많은 메시지라도 소프트웨어 구성 요소 간에 전송, 저장, 수신할 수 있습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/4b163310-f541-403f-aab6-43c66fb97704" width="500" height="300">   

위 사진은 Amazon SQS의 바리스타가 음료를 준비하는 중에도 계산원은 주문을 계속 받아 주문서를 대기열에 놓을 수 있습니다. 만약 Amazon SQS같은 대기열이 없다면 계산원은 바리스타가 음료를 다 만들고 음료 주문을 받아주길 기다려야 할 것 입니다.   

### 서버리스 컴퓨팅
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/85d16ff9-5997-45de-9e4b-f30a50da4024" width="500" height="300">   

**서버리스**라는 용어는 코드가 서버에서 실행되지만 서버를 프로비저닝하거나 관리할 필요가 없다는 뜻입니다.   
이를 이용하면 서버를 유지관리하는 대신 새로운 제품과 기능을 혁신하는데 더 집중할 수 있고 서버리스 애플리케이션을 자동으로 확장하거나 처리량 및 메모리와 같은 소비 단위를 수정하여 용량을 조정할 수 있는 유연성이 있습니다.   
서버리스 컴퓨팅용 AWS 서비스는 AWS Lambda입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/d85fe4fe-bdc6-4980-822a-3c1dec4f671a" width="500" height="300">   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/91e43a42-3443-47c9-a11a-c41ab8a7d018" width="500" height="300">   

위 사진들은 AWS Lambda에 대한 설명과 그 작동 방식입니다.   

### AWS 컨테이너 서비스
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/ccdc7a98-af55-4c13-8575-02272c6614ac" width="500" height="300">   

애플리케이션은 여러 구성 요소로 구성되는데 구성 요소는 서로 통신하여 데이터를 전송, 요청 이행, 애플리케이션을 계속 실행합니다.   

**모놀리스 애플리케이션**이란 구성요소가 밀결합된 애플리케이션으로 구성요소에는 데이터베이스, 서버, 사용자 인터페이서, 비지니스 로직 등이 포함될 수 있습니다. 이 방식은 한 구성 요소에서 장애가 발생 시 다른 구성 요소 심지어는 전체 애플리케이션에 장애가 발생할 수도 있습니다.   

**마이크로서비스** 접근 방식은 단일 구성 요소에 장애 발생 시 애플리케이션 가용성을 유지하며 애플리케이션을 설계할 수 있게 만들어졌습니다. 이는 구성 요소가 느슨히 결합되어 특정 구성 요소 장애 발생 시 다른 구성 요소의 장애를 방지합니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/f9a02495-4eca-4016-9e84-eb160d4abd60" width="500" height="300">   

컨테이너는 애플리케이션의 코드와 종속성을 하나의 객체로 패키징하는 표준 방식을 제공합니다. 이는 필수적인 보안, 안정성, 확장성 요구 사항이 있는 프로세스와 워크플로에 자주 사용됩니다.   
컨테이너식 애플리케이션 실행 시에는 확장성을 고려해야 합니다. 컨테이너가 많아질수록 그들을 관리하는 호스트가 많아질 것이기에 규모가 커지면 메모리 사용량, 보안, 로깅 등을 모니터링하는데 시간이 엄청 오래 걸리게 될 것입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/d4f735d9-d6ef-4fdf-8d0b-48da08f068e4" width="500" height="300">   

Amazon Elastic Container Service(Amazon ECS)는 AWS에서 컨테이너식 애플리케이션을 실행하고 확장할 수 있는 확장성이 뛰어난 고성능 컨테이너 관리 시스템입니다.   
Amazon ECS는 Docker 컨테이너를 지원하는데 (Docker는 애플리케이션을 신속하게 구축, 테스트 및 배포할 수 있는 소프트웨어 플랫폼입니다.) Amazon ECS에서는 API 호출을 사용하요 Docker 지원 애플리케이션을 시작 및 중지할 수 있습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/3444295b-4f94-471c-b4e0-da1fa1bd0e3f" width="500" height="300">   

Amazon Elastic Kubernetes Service(Amazon EKS)는 AWS에서 Kubernetes를 실행하는데 사용할 수 있는 완전관리형 서비스입니다.    
Kubernetes는 컨테이너식 애플리케이션을 대규모로 배포하고 관리하는데 사용할 수 있는 오픈 소스 소프트웨어로 대규모 자원 봉사자 커뮤니티에서 유지 관리합니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/b380ca57-13c3-46b5-b9d8-29a0f22cf929" width="500" height="300">   

AWS Fargate는 컨테이너용 서버리스 컴퓨팅 엔진입니다. 이는 Amazon ECS, EKS에서 작동하며 이 둘과 달리 컨테이너 호스팅 플랫폼입니다.   
이를 이용 시 서버를 프로비저닝하거나 관리할 필요가 없이 자동으로 서버 인프라를 관리합니다. 이를 이용해 애플리케이션 혁신과 개발에 더 집중할 수 있고 컨테이너를 실행하는데 필요한 리소스에 대해서만 비용을 지불하면 됩니다.   

## 글로벌 인프라 및 신뢰성
AWS는 전 세계에서 비즈니스 트래픽 수요가 있는 곳과 가장 가까운 위치에 리전을 구축합니다. 각 리전에는 애플리케이션을 실행하는데 필요한 모든 구성요소가 있는 여러 데이터 센터가 존재하고 각 리전은 AWS에서 제어하는 광섬유를 통해 다른 리전과 연결됩니다. 이러한 연결로 애플리케이션 구성 요소는 별도의 리전에서 실행되어 AWS 글로벌 인프라 전체에서 서로 통신할 수 있습니다.   
AWS에 애플리케이션을 배포 시 애플리케이션이 실행될 리전을 선택하는데 이 때 4가지 비즈니스 요소를 고려해야 합니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/82775553-ba5b-458e-909a-197513f10777" width="500" height="300">   

1. 데이터 거버넌스 및 법적 요구 사항 준수 - 회사와 위치에 따라 특정 영역에 데이터를 실행해야 할 수도 있습니다. 예를 들어 회사의 모든 데이터가 영국 내에 있어야 한다고 하면 런던 리전을 선택할 수 밖에 없습니다. 모든 회사에 이러한 규정이 있진 않기에 나머지 3가지 요소가 더 중요하게 작용할 수 있습니다.
2. 고객과의 접근성 - 고객과 가까우면 고객에게 컨텐츠를 더 빠르게 제공하는데 도움을 줍니다.
3. 리전 내에서 사용할 수 있는 서비스 - 경우에 따라 고객에게 제공하려는 기능이 가까운 리전에 없을 수도 있습니다.
4. 요금 - 요금을 결정하는 요인은 뒤에 더 자세히 나오지만 현재는 서비스 비용이 리전마다 다를 수도 있음을 알고 있으면 됩니다.

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/1f2ce32d-5f67-46ae-8074-00910e27c23a" width="500" height="300">   

위의 사진을 보면 각 리전에 3개 이상의 가용 영역이 있음을 알 수 있습니다. 가용 영역이란 리전 내의 단일 데이터 센터 또는 데이터 센터 그룹입니다.   
가용 영역은 서로 수십 마일 떨어져 있어 리전의 한 부분에서 재해가 일어나도 다른 가용 영역은 영향을 받지 않도록 합니다.   
가용 영역은 지연시간이 짧을 정도로 충분히 가깝지만 바로 옆에 구축되지는 않습니다.   

### 고객에게 더 가까이
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/f1680084-90e8-4e2a-b7e7-692f43b25931" width="500" height="300">   

만약 커피숍의 온라인 상점에 전 세계의 고객이 몰렸다면 전 세계에 물건을 보내줘야하겠지만 멀리 떨어진 곳의 고객에게는 분명 배송이 오래 걸릴 수 밖에 없을 것입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/06eabf19-528f-4dae-b1d5-8a9743e6600b" width="500" height="300">   

그러한 문제 해결을 위해 고객과 더 가까운 다른 곳에 새 매장을 열어서 미리 물건을 새 매장에 준비해두고 주문이 들어오면 더 가까운 곳에서 물건을 보내줍니다.   
이는 콘텐츠가 AWS 글로벌 인프라에서 전송되는 방식과 비슷하여 이미지, 비디오, 웹 페이지 및 기타 전자적 데이터 형식을 제공할 수 있습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/740e3603-f63e-4523-8d78-1cb369e22f71" width="500" height="300">   

신규 매장을 여는 것은 **엣지 로케이션**을 사용하여 콘텐츠와 고객의 거리를 줄이는 것과 유사합니다. 엣지 로케이션은 Amazon CloudFront가 고객에게 빨리 콘텐츠를 전송하기 위해 캐시된 콘텐츠 사본을 저장하는데 사용하는 사이트입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/2a38028f-7079-4671-9edb-a826f41a82cc" width="500" height="300">   

AWS Outposts는 온프레미스 위치 내에서 하이브리드 방식으로 AWS 인프라, 서비스, 도구를 실행하는데 사용할 수 있는 서비스로 Outposts를 이용하여 하이브리드 클라우드 접근 방식으로 데이터 센터, 사무실 및 소매 매장을 운영할 수 있습니다.   
ex) 회사 직원들이 외부의 특정 커피숍을 많이 이용하는데 외부로 나갈 필요없이 그 커피숍의 분점을 회사 내에 차려서 직원들의 시간 절약을 가능하게 할 수도 있습니다.   

이렇듯 AWS Outposts를 이용하면 데이터 집약적이거나 시간에 민감한 요구 사항이 있는 워크로드를 지원할 수 있습니다.   
Outpost가 온프레미스 위치에 설치되면 가장 가까운 AWS 리전에 연결되고 애플리케이션이 클라우드에서 실행되고 있는 것처럼 계속 AWS 서비스에 엑세스하고 모니터링 및 관리가 가능합니다.   

### AWS 서비스와 상호 작용
1. AWS 관리 콘솔 - AWS 서비스 액세스 및 관리용 웹 기반 인터페이스
2. AWS 명령줄 인터페이스 (AWS CLI) - 하나의 도구를 통해 명령줄에서 직접 여러 AWS 서비스를 제어하는데 도움
3. 소프트웨어 개발 키트(SDK) - 프로그래밍 언어 또는 플랫폼용으로 설계된 API를 통해 AWS 서비스를 사용하거나 AWS에서 실행할 완전히 새로운 애플리케이션을 생성하는데 도움

## 네트워킹

### Amazon Virtual Private Cloud(Amazon VPC)
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/87928f53-8ac0-4859-9e79-cfb3cece9507" width="500" height="300">   

위의 그림처럼 고객이 계산원을 통하지 않고 바리스타에게 직접 주문을 하려고 하면 계산원에게 주문을 받아서 바리스타에게 넘겨주던 흐름이 끊기게 되고 주문의 순서도 엉망이 될 수 있습니다. 즉 고객이 접근 가능한 구역과 제한 구역을 설정할 필요가 있는 것입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/cc875014-6bcb-4f0a-a0a5-dc7d3cc47af8" width="500" height="300">   

위의 그림은 바리스타가 계산원에게는 주문을 받을 수 있지만 고객에게 직접 주문을 받을 수는 없게 한 것입니다.   
이는 AWS 네트워킹 서비스를 이용하여 리소스를 격리하고 네트워크 트래픽의 흐름을 결정하는 것과 비슷합니다.   
이렇듯 AWS 리소스에 경계를 설정하는데 사용할 수 있는 네트워킹 서비스가 Amazon Virtual Private Cloud(Amazon VPC)입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/ae15b2a9-4b3a-408f-b8eb-3cd980009584" width="500" height="300">   

Amazon VPC를 사용하면 AWS 클라우드의 격리된 섹션을 프로비저닝할 수 있습니다. 이 격리된 섹션에서 사용자가 정의한 가상 네트워크에서 리소스를 시작할 수 있고 한 VPC 내에서 여러 서브넷으로 리소스를 구성할 수 있습니다.   
**서브넷**은 Amazon EC2 인스턴스와 같은 리소스를 포함할 수 있는 VPC 섹션입니다.   
위의 그림에서 카운터 영역을 VPC로 생각할 수 있고 각 워크스테이션을 서브넷으로 생각할 수 있습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/4ef3da45-63df-4dc9-8e35-d386d6a7ca71" width="500" height="300">   

퍼블릭 서브넷에는 온라인 상점의 웹 사이트 같이 누구나 엑세스 가능한 리소스가 포함되고 프라이빗 서브넷은 고객의 개인 정보, 주문 내역 등이 포함된 데이터베이스와 같이 프라이빗 네트워크를 통해서만 엑세스할 수 있는 리소스가 포함됩니다.   
서브넷은 VPC 내에서 서로 통신할 수 있습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/91a5349e-35ea-4bb7-a923-c15febc64394" width="500" height="300">   

위 그림은 클라이언트가 인터넷을 통해 VPC로 요청을 전송하여 이를 인터넷 게이트 웨이를 통해 서브넷으로 들어감을 보이고 있습니다.   
이는 퍼블릭 서브넷의 리소스에 통신하는 방법입니다.   
인터넷 게이트웨이는 VPC와 인터넷 간의 연결로 인터넷 게이트웨이는 출입문과 비슷한 것으로 이것이 없다면 아무도 VPC 내의 리소스에 엑세스할 수 없습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/ffc73c84-184b-4c7e-ab51-ea96f75d9d0d" width="500" height="300">   

VPC 내의 프라이빗 리소스에 액세스하려면 가상 프라이빗 게이트웨이를 사용할 수 있습니다. 
VPN 연결을 통해 인터넷 트래픽을 암호화하여 이렇게 보호된 인터넷 트래픽을 가상 프라이빗 게이트웨이를 통해 VPC로 들어오도록하는 것입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/83376d6f-3702-47ea-917d-546a8ea7e6c6" width="500" height="300">   

VPC 리소스에 엑세스하는 다른 방법으로는 AWS Direct Connect가 있습니다.   
AWS Direct Connect는 데이터 센터와 VPC 간에 전용 프라이빗 연결을 설정하는 서비스로 VPN 연결을 통한 방법처럼 공공의 연결을 암호화해서 가는 것이 아닌 전용 연결을 통해 가는 것이기에 교통 체증이 일어날 일이 없습니다.   
이러한 프라이빗 연결은 네트워크 비용을 절감하고 네트워크 통과 대역폭을 늘리는데도 도움이 됩니다.   

### 네트워크 엑세스 제어 목록 및 보안 그룹
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/805ccfde-c2fa-450e-804d-6cf644e73d99" width="500" height="300">   

고객이 AWS 클라우드에서 호스팅되는 애플리케이션에 데이터를 요청하면 패킷으로 전송이 됩니다. 패킷은 인터넷이나 네트워크를 통해 전송되는 데이터의 단위입니다.   
패킷은 인터넷 게이트웨이를 통해 VPC로 들어가는데 패킷이 서브넷에 출입을 하려면 권한 확인이 필요합니다. 이러한 권한은 패킷을 보낸 사람과 패킷이 서브넷 내의 리소스와 통신을 시도하는 방법을 나타냅니다.   
패킷 권한을 확인하는 VPC 구성 요소는 **네트워크 엑세스 제어 목록(ACL)**입니다.

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/1b235435-1236-4239-90a0-1920cbb60381" width="500" height="300">   

네트워크 액세스 제어 목록(ACL)은 서브넷 수준에서 인바운드 및 아웃바운드 트래핏을 제어하는 가상 방화벽입니다.   
각 AWS 계정에는 기본 네트워크 ACL이 포함됩니다. VPC를 구성할 때 계정의 기본 네트워크 ACL 혹은 사용자 지정 네트워크 ACL을 생성할 수 있습니다.   
기본 네트워크 ACL은 기본적으로 모든 인바운드 및 아웃바운드 트래픽을 허용하지만 사용자가 자체 규칙을 추가하여 수정할 수 있습니다.   
사용자 네트워크 ACL은 기본적으로 규칙을 추가하기전까진 모든 인바운드 및 아웃바운드 트래픽을 거부합니다.   

네트워크 ACL은 **상태 비저장(stateless)** 패킷 필터링을 수행합니다. 즉 아무것도 기억하지 않고 각 방향으로 서브넷 경계를 통과하는 패킷만 확인합니다.   
패킷이 서브넷에 들어간 후에는 서브넷 내의 리소스에 대한 권한이 평가되어야 하고 Amazon EC2 인스턴스에 대한 패킷 권한을 확인하는 VPC 구성 요소는 보안 그룹입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/3d55dc5e-ddea-4a73-bb8d-aee3c761a135" width="500" height="300">   

보안 그룹은 Amazon EC2 인스턴스에 대한 인바운드 및 아웃바운드 트래픽을 제어하는 가상 방화벽입니다.   
기본적으로 보안 그룹은 모든 인바운드 트래픽을 거부하고 모든 아웃바운드 트래픽을 허용합니다. 이 또한 사용자 지정 규칙을 추가해주어야 합니다.   
동일한 VPC 내에 여러 Amazon EC2 인스턴스가 있는 경우 동일한 보안 그룹에 연결 혹은 서로 다른 보안 그룹을 사용할 수 있습니다.   

보안 그룹은 **상태 저장(stateful)** 패킷 필터링을 수행합니다. 보안 그룹은 들어오는 패킷에 대해 내린 이전 결정을 기억합니다.   

### AWS 글로벌 네트워크와 상호 작용
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/0fa8d3a9-cf22-456c-bbca-10c5e53cb3ab" width="500" height="300">   

고객은 브라우저에 웹 주소를 입력하면 이 웹 사이트에 액세스할 수 있는데 이는 **도메인 이름 시스템(DNS)**확인 덕에 가능합니다. DNS 해석에는 고객 DNS 해석기와 회사 DNS 서버 간의 통신이 포함됩니다.   
DNS 해석은 도메인 이름을 IP 주소로 변환하는 프로세스입니다. 또한 DNS는 IP 주소에서 이름을 조회할 수 있습니다.   
ex) 원하는 도메인 이름을 브라우저에 입력하면 이 요청이 고객 DNS 해석기로 전송되고 고객 DNS 해석기는 회사 DNS 서버에 특정 도메인에 맞는 웹 사이트의 IP 주소를 요청하여 회사 DNS 서버는 IP 주소를 제공하며 응답합니다.   

Amazon Route 53는 DNS 기능을 제공하는 AWS 서비스입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/e58afd41-996a-49b0-b6e8-e864c5abd7cf" width="500" height="300">   

Amazon Route 53는 DNS 웹 서비스입니다. 이 서비스는 개발자와 비즈니스가 최종 사용자를 AWS에서 호스팅되는 인터넷 애플리케이션으로 라우팅할 수 있는 안정적인 방법을 제공합니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/20bca586-4f55-4bd0-8afc-29e30aac95d5" width="500" height="300">   

특정 회사의 애플리케이션이 여러 Amazon EC2 인스턴스에서 실행되고 있다고 가정할때 이러한 인스턴스는 애플리케이션 로드 밸런서에 연결되는 Auto Scailing 그룹 내에 있습니다.   
1. 고객은 회사 웹 사이트로 이동하여 애플리케이션에서 데이터 요청
2. Amazon Route 53는 DNS 변환(resolution)을 사용하여 회사 웹 사이트에 해당하는 IP 주소를 식별, 고객에게 전송
3. 고객의 요청은 Amazon CloudFront를 통해 가장 가까운 엣지 로케이션으로 라우팅
4. Amazon CloudFront는 애플리케이션 로드 밸런서에 연결, 애플리케이션 로드 밸런서는 수신 패킷을 Amazon EC2 인스턴스로 보냄

## AWS 스토리지 및 데이터 베이스

### AWS 스토리지
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/cac7ea5d-0285-4336-8f27-3bdfbc61e473" width="500" height="300">   

위 그림은 스토리지의 세가지 유형입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/66d53643-bf80-4cd1-b20f-e48146e4c580" width="500" height="300">   

먼저 **블록 수준 스토리지 볼륨**은 물리적 하드 드라이브처럼 동작합니다. 블록 스토리지에서 파일은 동일한 크기의 데이터 조각(블록)으로 구분되고 파일이 수정되면 변경된 부분만 업데이트됩니다.   
데이터베이스, 엔터프라이즈 소프트웨어 애플리케이션, 컴퓨터 하드 드라이브 등 여러 위치에서 사용이 가능하며 Amazon EC2 인스턴스에서 실행되는 애플리케이션에서도 사용할 수 있습니다.   
Amazon EC2 인스턴스에서 사용할 수 있는 블록 스토리지 유형 중 하나는 **인스턴스 스토어**입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/99510094-bace-49f6-a108-de9a93304d68" width="500" height="300">   

인스턴스 스토어는 Amazon EC2 인스턴스에 임시 블록 수준 스토리지를 제공합니다. Amazon EC2 인스턴스를 중지 또는 종료하면 연결된 인스턴스 스토어에 기록된 모든 데이터가 사라집니다.   
그렇기에 인스턴스 스토어는 장기적으로 필요하지 않은 임시 데이터가 포함된 사용 사례에 사용하는 것이 좋습니다.   
보존이 필요한 데이터를 사용하여 작업하는 경우 Amazon Elastic Block Store(Amazon EBS) 볼륨에 데이터를 저장할 수 있습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/0f4199ca-167c-457a-bea5-23d8a7971a32" width="500" height="300">   

Amazon Elastic Block Store(Amazon EBS)는 Amazon EC2 인스턴스에서 사용할 수 있는 블록 수준 스토리지 볼륨을 제공하는 서비스입니다.   
Amazon EC2 인스턴스를 중지 또는 종료하더라도 연결된 EBS 볼륨의 모든 데이터 사용이 가능합니다.   

EBS 볼륨을 생성하려면 구성을 정의한 후 프로비저닝하고 EBS 볼륨을 생성 후 Amazon EC2 인스턴스에 연결할 수 있습니다.   
EBS 볼륨은 데이터 백업이 중요합니다. Amazon EBS 스냅샷을 생성하여 EBS 볼륨을 증분 백업할 수 있습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/8457e21f-5b30-410f-87d7-5910a44ca6f5" width="500" height="300">   

Amazon EBS 스냅샷은 증분 백업입니다. 즉, 처음 볼륨을 백업하면 모든 데이터가 복사되고 이후의 백업에서는 가장 최근의 스냅샷 이후 변경된 데이터 블록만 저장됩니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/14791f00-2a2c-4bbe-9d2d-a27384a2348e" width="500" height="300">   

두번째로는 **객체 스토리지**로 각 객체는 데이터, 메타데이터, 키로 구성됩니다.   
데이터는 이미지, 동영상, 텍스트 문서 또는 다른 유형의 파일일 수 있습니다. 메타 데이터에는 데이터의 내용, 용도, 객체 크기 등에 대한 컨텍스트 정보가 포함됩니다. 객체의 키는 고유 식별자입니다.   

객체 스토리지에서 파일을 수정하면 전체 객체가 업데이트됩니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/76e4799f-3b64-494f-b2a3-da27dc5c430c" width="500" height="300">   

Amazon Simple Storage Service(Amazon S3)는 객체 수준 스토리지를 제공하는 서비스입니다. Amazon S3는 데이터를 버킷 내에 객체 단위로 저장합니다.   
Amazon S3는 저장 공간을 무제한으로 제공하며 Amazon S3 내 객체의 최대 파일 크기는 5TB입니다.   
S3에 업로드 시 권한을 설정하여 파일에 대한 표시 여부 및 액세스를 제어할 수 있습니다. S3 버전 관리 기능을 사용하여 시간 경과에 따른 객체 변경 사항을 추적할 수도 있습니다.   
S3는 사용한 만큼만 비용을 지불하고 비즈니스 및 비용 요구 사항에 맞춰 다양한 스토리지 클래스 중에서 선택할 수 있습니다. 
다음 두개의 요소가 S3 스토리지 클래스 선택 시 고려 사항입니다.   
1. 데이터 검색 빈도
2. 데이터 가용성

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/8830e89f-933d-4e34-b158-447b0448c532" width="500" height="300">   

S3 Standard 스토리지 클래스는 웹 사이트, 콘텐츠 배포, 데이터 분석 등 광범위한 사용 사례에 적합하고 자주 엑세스하지 않는 데이터 및 아카이브 스토리지를 위한 다른 스토리지 클래스보다 비용이 높습니다.   

S3 Standard Infrequent Access(S3 Standard-IA)는 자주 액세스하지 않지만 필요 시 고가용성이 요구되는 데이터에 이상적입니다.   
S3 Standard 및 S3 Standard-IA는 모두 최소 3개의 가용 영역에 데이터를 저장합니다. S3 Standard와 동일한 수준의 가용성을 제공하지만 스토리지 가격은 더 저렴하고 검색 가격은 더 높습니다.   

액세스 빈도가 낮은 데이터에 대해 고려해야 할 또 다른 스토리지 클래스는 S3 One Zone-Infrequent Access(S3 One Zone-IA)입니다. 이는 고가용성이 필요하지 않은 액세스 빈도가 낮은 데이터에 이상적입니다.   
위의 두 스토리지 클래스와 달리 S3 One Zone-IA는 단일 가용 영역에 데이터를 저장합니다. 따라서 다음 두 조건이 적용되는 경우 고려할만한 합니다.
1. 스토리지 비용 절감
2. S3 Standard 및 S3 Standard-IA에서 제공하는 고가용성 필요 X

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/65bb326b-ff03-4059-bcef-f461c0420636" width="500" height="300">   

S3 Intelligent-Tiering 스토리지 클래스는 액세스 패턴을 알 수 없거나 유동적인 데이터가 있는 경우 사용하기 좋습니다.   
이 스토리지 클래스에서는 Amazon S3가 객체의 액세스 패턴을 모니터링 하여 사용자가 30일 연속 객체에 액세스하지 않으면 Amazon S3는 자동으로 해당 객체를 S3 Standard-IA로 이동합니다. 사용자가 자주 사용하지 않은 액세스 계층에 저장된 객체에 액세스하면 Amazon S3는 자동으로 해당 객체를 S3 Standard로 이동합니다.   

S3 Intelligent-Tiering을 사용하면 객체당 월별 모니터링 및 자동화 비용이 발생하지만 수동으로 객체의 액세스 패턴을 모니터링하지 않아도 되기에 시간 절약이 가능하다는 이점이 있습니다.   

마지막 Amazon S3 스토리지 클래스는 Amazon S3 Glacier Instant Retrleval, Amazon S3 Glacier Flexible Retrleval 및 S3 Glacier Deep Archive입니다.   
이들은 데이터 아카이빙에 이상적인 저비용 스토리지 클래스로 이러한 클래스를 이용하여 고객 레코드나 이전의 사진 또는 비디오 파일을 저장할 수 있습니다.   
이 3개의 스토리지 클래스의 차이는 얼마나 빨리 검색되냐 입니다. Instant Retrleval은 몇 밀리초, Flexible Retrleval에 저장된 객체는 무료 대량 검색을 통해 몇분에서 몇시간 Deep Archive는 저장된 객체를 12시간 이내에 검색할 수 있습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/07369b3f-ddfd-41e5-808b-f4e2f3f68932" width="500" height="300">   
