---
layout: single
title:  "AWS_CLOUD_캠프"
categories: study
---

# 1. AWS(Amazon Web Services) 소개
### 이 포스팅에서는 캠프에서 배운 이론을 포스팅하는 것으로 커피숍에 AWS를 비유하여 작성하겠습니다.
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/a15f3c71-f5ab-4afa-94e7-b0e2104f35f3" width="500" height="300">    

거의 모든 최신 컴퓨팅의 중심에는 커피숍 거래와 유사한 트랜잭션을 사용하는 기본적 클라이언트-서버 모델이 있습니다.   
고객이 커피 한잔 요청 -> 바리스타가 음료를 만들어 고객에게 제공   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/ff6fe39e-35af-4499-9c3f-4ce82005d26f" width="500" height="300">    

컴퓨팅에서 **고객**은 클라이언트이며 클라이언트는 사람이 컴퓨터 서버에 요청을 하기 위해 상호 작용하는 웹, 데스크톱 애플리케이션일 수 있습니다. 서버는 **바리스타**와 같습니다. 서버는 일종의 가상 서버인 Amazon Elastic Compute Cloud(Amazon EC2)와 같은 서비스일 수 있습니다.   
ex) 고객이 커피 주문, 쿠폰, 프로모션 등을 요청한다고 가정하면 서버는 요청을 평가하고 클라이언트에 정보를 반환하여 요청을 이행합니다.   

## 클라우드 컴퓨팅
클라이언트-서버 모델을 통해 **클라우드 컴퓨팅**이 가능합니다. 클라우드 컴퓨팅이란 인터넷을 통해 IT 리소스와 애플리케이션을 *온디맨드*로 제공하는 서비스를 말합니다.   
이때 온디맨드란 사용자의 요구가 있었을 때 그 요구에 따라 서비스를 제공하는 것을 말합니다.   

클라우드 컴퓨팅을 사용하면 대규모 사전 투자를 방지하고 하드웨어 관리에 시간과 리소스를 할애하지 않아도 되며 필요에 따라 컴퓨팅 리소스 프로비저닝이 가능하며 사용한만큼의 비용만 지불해도 됩니다.   

### 클라우드 컴퓨팅 배포 모델
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/b84653f0-118b-4660-aa3a-a929ad207376" width="500" height="300">   
   
클라우드 배포 전략을 선택 시 기업은 원하는 클라우드 애플리케이션 구성 요소, 선호하는 리소스 관리 도구, 레거시 IT 인프라 요구 사항 등의 요소를 고려해야 합니다.   
이때 배포의 세가지 모델은 클라우드 기반 배포, 온프레미스 배포, 하이브리드 배포가 있습니다.   

#### 클라우드 기반 배포
1. 애플리케이션의 모든 부분을 클라우드에서 실행
2. 기존 애플리케이션을 클라우드로 마이그레이션
3. 클라우드에서 새로운 애플리케이션 설계 및 구축

ex) 기업은 완전히 클라우드에 기반한 가상 서버, 데이터베이스, 네트워킹 구성 요소로 구성된 애플리케이션을 생성할 수 있습니다. 이를 통해 회사의 관리, 설계, 크기 조정 요구 사항을 줄일 수 있습니다.   

#### 온프레미스 배포
1. 가상화 및 리소스 관리 도구를 사용하여 리소스 배포
2. 애플리케이션 관리 및 가상화 기술을 사용하여 리소스 사용량 증가

온프레미스 배포는 프라이빗 클라우드 배포라고도 불립니다.   
ex) 온프레미스 데이터 센터에서 실행되는 애플리케이션이 있을 수 있는데 이 모델은 레거시 IT 인프라와 비슷하지만 애플리케이션 관리와 가상화 기술이 통합되어 리소스 사용량을 높이는 데 도움이 됩니다.   

#### 하이브리드 배포
1. 클라우드 기반 리소스를 온프레미스 인프라에 연결
2. 클라우드 기반 리소스와 레거스 IT 애플리케이션을 통합

1번과 같은 접근 방법이 필요한 여러 상황이 있을 수 있는데
ex) 온프레미스에서 보다 잘 유지 관리되는 레거시 애플리케이션이 있거나 정부 규정에 따라 특정 레코드를 온프레미스에 보관해야 하는 경우가 있을 수 있습니다.   
ex) 배치 데이터 처리 및 분석을 자동화할 수 있는 클라우드 서비스를 사용하려는 회사가 있다고 가정해보겠습니다. 이때 이 회사는 온프레미스에 더 적합하고 클라우드로 마이그레이션되지 않는 여러 레거시 애플리케이션이 있습니다. 이럴때 하이브리드 배포를 통해 레거시 애플리케이션을 온프레미스로 유지하고 클라우드에서 실행되는 데이터 및 분석 서비스의 이점을 활용할 수 있습니다.   

### 클라우드 컴퓨팅의 이점
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/4bde761e-d4ab-408e-8b58-109b09ea6c4f" width="500" height="300">   

초기 비용을 가변 비용으로 바꿀 수 있다는 이점이 있습니다.   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/d3ee7d6a-cc25-4919-88e2-f255d7877e8d" width="500" height="300">   
데이터 센터에서 컴퓨팅하려면 인프라 및 서버 관리에 더 많은 비용과 시간을 소비해야 하는 경우가 많은데 이러한 작업에 신경을 덜 쓰고 애플리케이션과 고객에 더 집중할 수 있습니다.   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/06d2daf3-4f61-43e8-a1f7-2faea8738ca3" width="500" height="300">   
용량을 추정할 필요가 없습니다.   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/13dd1d1a-437f-4905-b532-55b506240cc6" width="500" height="300">   
거대한 규모의 경제를 활용할 수 있습니다. 인프라를 소유할 때보다 가변 비용이 낮아집니다.
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/6f877511-6445-48ae-9ebd-573efc24b43b" width="500" height="300">   
속도와 민첩성을 높일 수 있습니다. 데이터 센터에서 컴퓨팅 수행 시, 필요한 새 리소스를 확보하는 데 몇 주가 걸릴 수도 있는데 이에 비해 클라우드 컴퓨팅 이용시 몇 분 만에 새로운 리소스에 액세스할 수 있습니다.   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/c9a3dcec-f9ec-4e8c-9920-4001a2600ceb" width="500" height="300">   
AWS 클라우드의 글로벌 입지를 활용하여 신속하게 애플리케이션을 배포하는 동시에 짧은 지연 시간을 제공할 수 있습니다.   

### AWS 핵심 서비스 범주
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/84a08969-b2b3-4c0e-ae28-231f2abe00fc" width="500" height="300">   

AWS에서 제공하는 모든 서비스를 알 필요는 없기에 기본 개념을 중점적으로 설명하겠습니다.   

## 클라우드 컴퓨팅
AWS에서는 Amazon EC2(Amazon Elastic Compute Cloud) 서비스를 사용하여 가상 서버를 실행할 수 있습니다.   

### Amazon EC2
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/4d1d3cf5-2685-4a3a-b679-7d6c6815e10f" width="500" height="300">   

Amazon EC2는 클라우드에서 안전하고 크기 조정이 가능한 컴퓨팅 용량을 Amazon EC2 인스턴스로 제공합니다.   

ex) Amazon EC2 인스턴스에서 가상 서버를 사용하여 AWS 클라우드에서 애플리케이션을 실행하면 다음과 같은 과정이 됩니다.   
1. 몇 분 내에 Amazon EC2 인스턴스 프로비저닝 및 시작   
2. 워크로드 실행을 맟치면 사용 중지   
3. 인스턴스가 실행중일 때 사용한 컴퓨팅 시간에 대해서만 비용 지불, 인스턴스가 중지 or 종료 시 비용 지불 x   
4. 필요한 서버 용량에 대해서만 비용을 지불하여 비용 절감   

### Amazon EC2 작동 방식
인스턴스를 시작 -> 인스턴스 연결 -> 인스턴스 사용   
1. 인스턴스 시작에서는 인스턴스의 기본 구성이 포함된 템플릿을 선택하고 이러한 구성에는 운영체제, 애플리케이션 서버 또는 애플리케이션이 포함됩니다. 인스턴스의 특정 하드웨어 구성인 인스턴스 유형도 선택합니다.
2. 인스턴스 연결 시에는 여러 가지 방법으로 연결할 수 있습니다. 프로그램과 애플리케이션에는 인스턴스에 직접 연결하고 데이터를 교환하는 여러 가지 방법이 있습니다. 또는 사용자가 로그인하여 인스턴스에 연결하고 컴퓨터 데스크톱에 액세스할 수도 있습니다.
3. 인스턴스 사용은 명령을 실행하여 소프트웨어 설치, 스토리지 추가, 파일 복사 및 정리 등의 작업을 수행할 수 있습니다.

### Amazon EC2 인스턴스 유형
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/189a0d5a-e92e-41e5-8bf4-b532fb03689c" width="500" height="300">   

만약 커피숍의 커피 만들기, 계산대 업무, 물품 주문 등의 일을 각각의 직원들이 전부 하게 되면 동선이든 일이든 겹치는 등의 부분이 발생하여 고객에게 최상의 서비스를 제공하지 못하게 될 수 있겠죠.   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/85257c35-09ba-48e9-96e1-6e69a4221e42" width="500" height="300">   

이렇기에 각 직원마다의 업무 전문화가 필요하게 됩니다.   
각 직원마다 강점이 다르기에 각 직원의 전문성을 발휘할 수 있게 일하게 하는게 효율이 가장 높게 될 것입니다. 그럼 이러한 직원들을 다양한 유형의 Amazon EC2 인스턴스로 생각하게 되먄 Amazon EC2 인스턴스를 시작하여 다양한 작업을 완료할 수 있게 됩니다.   

Amazon EC2 인스턴스 유형에는 5가지가 존재하는데   
인스턴스 유형을 선택할 때는 워크로드 및 애플리케이션의 구체적 요구 사항을 고려해야 합니다.   

1. 범용 - 컴퓨팅, 메모리, 네트워킹 리소스를 균형있게 제공, 다양한 워크로드에 적합
2. 컴퓨팅 최적화 - 고성능 프로세서 제공, 컴퓨팅 집약적 애플리케이션 및 배치 처리 워크로드에 적합
3. 메모리 최적화 - 메모리 집약적 워크로드를 위한 빠른 성능 제공, 고성능 데이터베이스에 적합
4. 가속 컴퓨팅 - 하드웨어 액셀러레이터를 사용하여 데이터 처리 가속화, 애플리케이션 스트리밍 및 그래픽 워크로드에 적합
5. 스토리지 최적화 - 낮은 지연 시간 및 높은 초당 입출력 작업 수 (IOPS) 제공, 분산 파일 시스템 및 데이터 웨어하우징 애플리케이션과 같은 워크로드에 적합

### Amazon EC2 인스턴스 요금 옵션
Amazon EC2에서는 사용한 컴퓨팅 시간에 대해서만 비용을 지불합니다. Amazon EC2는 사용 사례에 따라 6개의 요금 옵션을 제공합니다.   

1. 온디맨드 - 초기 선결제 비용이나 최소 약정 없음, 불규칙한 단기 워크로드에 적합
2. 스팟 - 시작 및 종료 시간이 자유로운 워크로드에 적합, 온디맨드 대비 비용 절감
3. 예약 - 온디맨드 요금에 비해 결제 할인 제공, 1년 또는 3년 약정 필요
4. Compute Savings Plans - 컴퓨팅 사용량이 일정할 경우 온디맨드에 비해 최대 66% 비용 절감, 1년 또는 3년 약정 필요
5. 전용 인스턴스 - 단일 고객용 하드웨어의 VPC에서 실행되는 EC2 인스턴스, 표준 Amazon EC2 인스턴스에 비해 더 높은 비용
6. 전용 호스트 - 단일 고객용 EC2 인스턴스 용량을 갖춘 물리적 서버, 가장 비용이 많이 드는 Amazon EC2 옵션

### Amazon EC2 Auto Scaling
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/1b484fb0-5a18-470d-962b-39adf65230c5" width="500" height="300">   

수동 크기 조정의 예를 위의 커피숍 예로 설명하면 바쁜 시기에 바리스타가 한 명이면 이 바리스타는 업무가 벅차서 지원을 요청할 것이고 이 요청을 들은 점장은 다른 바리스타를 데려올 것입니다. 이러한 것이 수동 크기 조정의 예입니다.   
이것은 비효율적일 수 있기에 확장성을 위해서는 필요한 리소스만으로 시작하고 수요 변화에 따라 자동으로 확장 및 축소되도록 아키텍처를 설계해야 합니다. 이렇기에 사용한 리소스에 대해서만 비용을 지불하고 고객의 요구를 충족할 수 있는 컴퓨팅 용량 부족을 걱정할 필요가 없습니다.   
그럼 크기 조정이 자동으로 되려면 어떻게 해야 할까요? Amazon EC2 인스턴스에 이 기능을 제공하는 AWS 서비스가 Amazon EC2 Auto Scaling 입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/ff7046d3-a16f-4f52-b993-c22c7a6dcd85" width="500" height="300">   

Amazon EC2 Auto Scaling에서는 동적 크기 조정과 예측 크기 조정이라는 두 가지 접근 방식을 사용할 수 있는데 동적 크기 조정은 수요 변화에 대응하고 예측 크기 조정은 예측된 수요에 따라 적절한 수의 Amazon EC2 인스턴스를 자동으로 예약합니다. 이 둘을 함께 사용하면 더 빠르게 조정이 가능합니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/80221e5d-974b-47dc-86b1-4e3c3623f639" width="500" height="300">   

위는 최대 4개의 Amazon EC2 인스턴스로 구성되는 Auto Scaling 그룹을 보여주는 다이어그램으로 최소 1개, 희망 2개, 마지막 2개는 필요에 따라 확장이 가능합니다.   
Amazong Auto Scaling을 애플리케이션에 추가하면 필요 시 새 인스턴스를 애플리케이션에 추가 혹은 제거할 수 있습니다.   

### 로드 밸런싱
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/ec69bfe5-c2ef-47bb-aa66-e99faf369cf1" width="500" height="300">   

앞의 커피숍 예에서 바리스타 한 명이 대부분의 일을 다 한다고 가정하겠습니다.   
이러면 효율성이 떨어지게 되므로 한 바리스타에세 일이 집중되는 일이 없도록 워크로드를 분산해 줄 필요가 있습니다.   
AWS에서 Elastic Load Balancing을 사용하면 워크로드의 크기는 동일하게 유지되지만 워크로드가 Amazon EC2 인스턴스 전체에 균등하게 분산되어 균형이 유지되게 할 수 있습니다.   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/e8947a92-0c71-44ac-98d9-cdf0cccd9ce1" width="500" height="300">   

### AWS 메시징 서비스
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/d45927fa-f96e-4010-b641-5724f5d5b550" width="500" height="300">   

Amazon Simple Notification Service(Amazon SNS)는 게시/구독 서비스로 게시자는 Amazon SNS 주제를 사용하여 구독자에게 메시지를 게시합니다. 이는 커피숍에서 계산원이 음료를 만드는 바리스타에게 커피 주문을 전달하는 것과 비슷합니다. Amazon SNS에서 구독자는 웹 서버, 이메일 주소, AWS Lambda 함수 또는 그 밖의 여러 옵션이 될 수 있습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/02355395-5bb9-4626-8973-64aadc3e9bac" width="500" height="300">   

위 사진을 보면 위의 주제 등과 같은 커피숍의 전체 비지니스 영역의 업데이트가 포함된 단일 뉴스레터가 있다고 가정하겠습니다. 뉴스레터는 하나이므로 위의 모든 주제가 단일 주제로 그룹화되게 되어 뉴스레터를 구독하는 고객은 모든 업데이트를 받게 됩니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/80dfee89-9490-4c16-a752-f0910b430ea7" width="500" height="300">   

이때 각 주제를 따로 받고 싶다는 요청을 듣고 뉴스레터를 개별 주제로 바꾼다면 위의 사진처럼 각 고객은 자신이 원하는 주제들에 대해서만 구독할 수 있게 됩니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/c629677e-3bbe-4cb4-8d73-b673a07ff8f5" width="500" height="300">   

Amazon Simple Queue Service(Amazon SQS)는 메시지 대기열 서비스입니다.   
이를 이용하면 메시지 손실이나 다른 서비스 사용 없이 아무리 많은 메시지라도 소프트웨어 구성 요소 간에 전송, 저장, 수신할 수 있습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/4b163310-f541-403f-aab6-43c66fb97704" width="500" height="300">   

위 사진은 Amazon SQS의 바리스타가 음료를 준비하는 중에도 계산원은 주문을 계속 받아 주문서를 대기열에 놓을 수 있습니다. 만약 Amazon SQS같은 대기열이 없다면 계산원은 바리스타가 음료를 다 만들고 음료 주문을 받아주길 기다려야 할 것 입니다.   

### 서버리스 컴퓨팅
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/85d16ff9-5997-45de-9e4b-f30a50da4024" width="500" height="300">   

**서버리스**라는 용어는 코드가 서버에서 실행되지만 서버를 프로비저닝하거나 관리할 필요가 없다는 뜻입니다.   
이를 이용하면 서버를 유지관리하는 대신 새로운 제품과 기능을 혁신하는데 더 집중할 수 있고 서버리스 애플리케이션을 자동으로 확장하거나 처리량 및 메모리와 같은 소비 단위를 수정하여 용량을 조정할 수 있는 유연성이 있습니다.   
서버리스 컴퓨팅용 AWS 서비스는 AWS Lambda입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/d85fe4fe-bdc6-4980-822a-3c1dec4f671a" width="500" height="300">   
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/91e43a42-3443-47c9-a11a-c41ab8a7d018" width="500" height="300">   

위 사진들은 AWS Lambda에 대한 설명과 그 작동 방식입니다.   

### AWS 컨테이너 서비스
<img src="https://github.com/124coding/124coding.github.io/assets/114299892/ccdc7a98-af55-4c13-8575-02272c6614ac" width="500" height="300">   

애플리케이션은 여러 구성 요소로 구성되는데 구성 요소는 서로 통신하여 데이터를 전송, 요청 이행, 애플리케이션을 계속 실행합니다.   

**모놀리스 애플리케이션**이란 구성요소가 밀결합된 애플리케이션으로 구성요소에는 데이터베이스, 서버, 사용자 인터페이서, 비지니스 로직 등이 포함될 수 있습니다. 이 방식은 한 구성 요소에서 장애가 발생 시 다른 구성 요소 심지어는 전체 애플리케이션에 장애가 발생할 수도 있습니다.   

**마이크로서비스** 접근 방식은 단일 구성 요소에 장애 발생 시 애플리케이션 가용성을 유지하며 애플리케이션을 설계할 수 있게 만들어졌습니다. 이는 구성 요소가 느슨히 결합되어 특정 구성 요소 장애 발생 시 다른 구성 요소의 장애를 방지합니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/f9a02495-4eca-4016-9e84-eb160d4abd60" width="500" height="300">   

컨테이너는 애플리케이션의 코드와 종속성을 하나의 객체로 패키징하는 표준 방식을 제공합니다. 이는 필수적인 보안, 안정성, 확장성 요구 사항이 있는 프로세스와 워크플로에 자주 사용됩니다.   
컨테이너식 애플리케이션 실행 시에는 확장성을 고려해야 합니다. 컨테이너가 많아질수록 그들을 관리하는 호스트가 많아질 것이기에 규모가 커지면 메모리 사용량, 보안, 로깅 등을 모니터링하는데 시간이 엄청 오래 걸리게 될 것입니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/d4f735d9-d6ef-4fdf-8d0b-48da08f068e4" width="500" height="300">   

Amazon Elastic Container Service(Amazon ECS)는 AWS에서 컨테이너식 애플리케이션을 실행하고 확장할 수 있는 확장성이 뛰어난 고성능 컨테이너 관리 시스템입니다.   
Amazon ECS는 Docker 컨테이너를 지원하는데 (Docker는 애플리케이션을 신속하게 구축, 테스트 및 배포할 수 있는 소프트웨어 플랫폼입니다.) Amazon ECS에서는 API 호출을 사용하요 Docker 지원 애플리케이션을 시작 및 중지할 수 있습니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/3444295b-4f94-471c-b4e0-da1fa1bd0e3f" width="500" height="300">   

Amazon Elastic Kubernetes Service(Amazon EKS)는 AWS에서 Kubernetes를 실행하는데 사용할 수 있는 완전관리형 서비스입니다.    
Kubernetes는 컨테이너식 애플리케이션을 대규모로 배포하고 관리하는데 사용할 수 있는 오픈 소스 소프트웨어로 대규모 자원 봉사자 커뮤니티에서 유지 관리합니다.   

<img src="https://github.com/124coding/124coding.github.io/assets/114299892/b380ca57-13c3-46b5-b9d8-29a0f22cf929" width="500" height="300">   

AWS Fargate는 컨테이너용 서버리스 컴퓨팅 엔진입니다. 이는 Amazon ECS, EKS에서 작동하며 이 둘과 달리 컨테이너 호스팅 플랫폼입니다.   
이를 이용 시 서버를 프로비저닝하거나 관리할 필요가 없이 자동으로 서버 인프라를 관리합니다. 이를 이용해 애플리케이션 혁신과 개발에 더 집중할 수 있고 컨테이너를 실행하는데 필요한 리소스에 대해서만 비용을 지불하면 됩니다.   
